{"version":3,"sources":["utils/alphabets.ts","utils/index.ts","components/Letter/index.ts","components/Letter/letter.tsx","components/Settings/index.ts","components/Settings/settings.tsx","components/App/index.ts","components/App/app.tsx","index.tsx"],"names":["russianAlphabet","getRandomLetter","alphabet","Math","floor","random","length","initialSettings","isUnique","isAnimation","parseStorage","storage","JSON","parse","Letter","isAnimationPending","fakeLetter","letter","className","Settings","settings","setSettings","useEffect","Object","keys","localStorage","setItem","stringify","type","name","onChange","prevSettings","checked","App","alphabets","useState","setLetter","setFakeLetter","setIsAnimationPending","relevantLetters","setRelevatLetters","pastLetters","setPastLetters","isHasRelevantLetters","updateRelevantLetters","useCallback","newLetter","filtered","filter","l","includes","storageLetters","getItem","stogeSettings","animationChangeLetter","Promise","resolve","letterIntervalId","setInterval","setTimeout","clearInterval","onAnimationEnd","onChangeClick","a","then","onClick","disabled","window","confirm","removeItem","map","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c42b4f48.chunk.js","sourcesContent":["const russianAlphabet: string[] = [\r\n    'А',\r\n    'Б',\r\n    'В',\r\n    'Г',\r\n    'Д',\r\n    'Е',\r\n    'Ё',\r\n    'Ж',\r\n    'З',\r\n    'И',\r\n    'Й',\r\n    'К',\r\n    'Л',\r\n    'М',\r\n    'Н',\r\n    'О',\r\n    'П',\r\n    'Р',\r\n    'С',\r\n    'Т',\r\n    'У',\r\n    'Ф',\r\n    'Х',\r\n    'Ц',\r\n    'Ч',\r\n    'Ш',\r\n    'Щ',\r\n    'Ъ',\r\n    'Ы',\r\n    'Ь',\r\n    'Э',\r\n    'Ю',\r\n    'Я',\r\n];\r\n\r\nexport {\r\n    russianAlphabet\r\n}","import * as alphabets from './alphabets';\r\n\r\nconst getRandomLetter = (alphabet: string[] ): string => {\r\n    return alphabet[Math.floor(Math.random() * alphabet.length)];\r\n};\r\n\r\nconst initialSettings: ISettingsState = {\r\n    isUnique: true,\r\n    isAnimation: false,\r\n};\r\n\r\nconst parseStorage = (storage: string | null) => {\r\n    if (!storage) {\r\n        return null;\r\n    }\r\n    return JSON.parse(storage)\r\n}\r\n\r\nexport { alphabets, getRandomLetter, parseStorage, initialSettings };\r\n","import Letter from './letter';\nexport default Letter;","import React from 'react';\n\ninterface OwnProps {\n    isAnimationPending: boolean,\n    fakeLetter: string,\n    letter: string\n}\n\nconst Letter: React.FC<OwnProps> = ({ isAnimationPending, fakeLetter, letter }) => {\n    const renderLetter = (): string => {\n        if (isAnimationPending) {\n            return fakeLetter;\n        }\n\n        if (!letter) {\n            return 'Буква не выбрана';\n        }\n\n        return letter;\n    };\n\n    return <div className=\"letter\">{renderLetter()}</div>;\n};\n\nexport default Letter;\n","import Settings from './settings';\nexport default Settings;","import React, { useEffect } from 'react';\n\ninterface OwnProps {\n    settings: ISettingsState,\n    setSettings: React.Dispatch<React.SetStateAction<ISettingsState>>,\n};\n\nconst Settings: React.FC<OwnProps> = ({ settings, setSettings }) => {\n    useEffect(() => {\n        if (!Object.keys(settings).length) {\n            return;\n        }\n        localStorage.setItem('settings', JSON.stringify(settings));\n    }, [settings]);\n\n    const onChangeUnique = () => {\n        setSettings((prevSettings) => {\n            return {\n                ...prevSettings,\n                isUnique: !prevSettings.isUnique,\n            };\n        });\n    };\n\n    const onChangeAnimation = () => {\n        setSettings((prevSettings) => {\n            return {\n                ...prevSettings,\n                isAnimation: !prevSettings.isAnimation,\n            };\n        });\n    };\n\n    return (\n        <div className=\"settings\">\n            <h2>Настройки</h2>\n            <label>\n                <input type=\"checkbox\" name=\"unique\" onChange={onChangeUnique} checked={settings.isUnique || false} />\n                <span>Буквы должны быть уникальные</span>\n            </label>\n            <label>\n                <input\n                    type=\"checkbox\"\n                    name=\"animation\"\n                    onChange={onChangeAnimation}\n                    checked={settings.isAnimation || false}\n                />\n                <span>Включить анимацию</span>\n            </label>\n        </div>\n    );\n};\n\nexport default Settings;\n","import App from './app';\r\nexport default App;","import React, { useEffect, useState, useCallback } from 'react';\r\nimport { alphabets, getRandomLetter, initialSettings, parseStorage } from '../../utils';\r\nimport Letter from '../Letter';\r\nimport Settings from '../Settings';\r\n\r\nimport './app.scss';\r\n\r\nconst ANIMATION_DURATION = 500;\r\n\r\nconst App: React.FC = () => {\r\n    const { russianAlphabet } = alphabets;\r\n    const [letter, setLetter] = useState<string>('');\r\n    const [fakeLetter, setFakeLetter] = useState<string>('');\r\n    const [isAnimationPending, setIsAnimationPending] = useState<boolean>(false);\r\n    const [relevantLetters, setRelevatLetters] = useState<string[]>(russianAlphabet);\r\n    const [pastLetters, setPastLetters] = useState<string[]>([]);\r\n    const [settings, setSettings] = useState<ISettingsState>(initialSettings)\r\n    \r\n    const isHasRelevantLetters = relevantLetters.length;\r\n\r\n    const updateRelevantLetters = useCallback(\r\n        (newLetter?: string): void => {\r\n            if (settings.isUnique) {\r\n                const filtered = russianAlphabet.filter((l) => ![...pastLetters, newLetter].includes(l));\r\n                setRelevatLetters(filtered);\r\n                return;\r\n            }\r\n\r\n            setRelevatLetters(russianAlphabet);\r\n        },\r\n        [pastLetters, russianAlphabet, settings.isUnique]\r\n    );\r\n\r\n    useEffect(() => {\r\n        const storageLetters = parseStorage(localStorage.getItem('pastLetters')) || [] ;\r\n        const stogeSettings = parseStorage(localStorage.getItem('settings')) || initialSettings;\r\n        setPastLetters(storageLetters);\r\n        setSettings(stogeSettings);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!pastLetters.length) {\r\n            return;\r\n        }\r\n        localStorage.setItem('pastLetters', JSON.stringify(pastLetters));\r\n    }, [pastLetters]);\r\n\r\n    useEffect(() => {\r\n        updateRelevantLetters();\r\n    }, [settings.isUnique, updateRelevantLetters]);\r\n\r\n    const onNewGame = () => {\r\n        const isClose = window.confirm('Начать новую игру?');\r\n        if (isClose) {\r\n            setPastLetters([]);\r\n            setLetter('');\r\n            setRelevatLetters(russianAlphabet);\r\n            localStorage.removeItem('pastLetters');\r\n        }\r\n    };\r\n\r\n    const animationChangeLetter = () => {\r\n        if (!settings.isAnimation) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        setIsAnimationPending(true);\r\n\r\n        const letterIntervalId = setInterval(() => {\r\n            setFakeLetter(getRandomLetter(russianAlphabet));\r\n        }, 60);\r\n\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                clearInterval(letterIntervalId);\r\n                resolve('letter change');\r\n            }, ANIMATION_DURATION);\r\n        });\r\n    };\r\n\r\n    const onAnimationEnd = () => {\r\n        setIsAnimationPending(false);\r\n        const newLetter = getRandomLetter(relevantLetters);\r\n        setLetter(newLetter);\r\n        return newLetter;\r\n    };\r\n\r\n    const onChangeClick = async () => {\r\n        const newLetter = await animationChangeLetter().then(onAnimationEnd);\r\n        setPastLetters([...pastLetters, newLetter]);\r\n        updateRelevantLetters(newLetter);\r\n    };\r\n\r\n    return (\r\n        <div className=\"app\">\r\n            {!isHasRelevantLetters && 'Уникальные буквы закончились'}\r\n            <Letter isAnimationPending={isAnimationPending} fakeLetter={fakeLetter} letter={letter} />\r\n            <button className=\"btn\" onClick={onChangeClick} disabled={isAnimationPending || !isHasRelevantLetters}>\r\n                Сменить букву\r\n            </button>\r\n            <button className=\"btn\" onClick={onNewGame}>\r\n                Новая игра\r\n            </button>\r\n\r\n            <div className=\"past-letters\">\r\n                <h2>История</h2>\r\n                {pastLetters.map((letter) => `${letter} `)}\r\n            </div>\r\n            <Settings\r\n                settings={settings}\r\n                setSettings={setSettings}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}